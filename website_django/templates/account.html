{% extends "base.html" %}

{% block title %}Account | SustainaCore{% endblock %}

{% block content %}
<section class="section section--with-header">
    <div class="shell">
        <div class="section__header">
            <div>
                <p class="eyebrow">Account profile</p>
                <h1>Complete your profile</h1>
                <p class="muted">Help us tailor access and updates by adding a few details.</p>
            </div>
        </div>

        {% if missing_email %}
        <div class="alert alert--warning">
            Please re-enter your email to manage your profile.
            <a class="text-link" href="{% url 'login' %}">Go to login</a>
        </div>
        {% endif %}

        {% if profile_empty and not missing_email %}
        <div class="alert alert--info">
            Your profile is currently empty. Add details to keep your account up to date.
        </div>
        {% endif %}

        {% if error %}
        <div class="alert alert--error">{{ error }}</div>
        {% endif %}

        <div class="card auth-card">
            <form method="post" class="auth-form">
                {% csrf_token %}
                <label>
                    Name
                    <input type="text" name="name" value="{{ profile.name }}" placeholder="Your name" {% if missing_email %}disabled{% endif %} />
                </label>
                <label>
                    Country
                    <select name="country" {% if missing_email %}disabled{% endif %}>
                        <option value="">Select a country</option>
                        <option value="United Kingdom" {% if profile.country == "United Kingdom" %}selected{% endif %}>United Kingdom</option>
                        <option value="Italy" {% if profile.country == "Italy" %}selected{% endif %}>Italy</option>
                        <option value="Brazil" {% if profile.country == "Brazil" %}selected{% endif %}>Brazil</option>
                        <option value="United States" {% if profile.country == "United States" %}selected{% endif %}>United States</option>
                        <option value="Canada" {% if profile.country == "Canada" %}selected{% endif %}>Canada</option>
                        <option value="France" {% if profile.country == "France" %}selected{% endif %}>France</option>
                        <option value="Germany" {% if profile.country == "Germany" %}selected{% endif %}>Germany</option>
                        <option value="Spain" {% if profile.country == "Spain" %}selected{% endif %}>Spain</option>
                        <option value="Portugal" {% if profile.country == "Portugal" %}selected{% endif %}>Portugal</option>
                        <option value="Netherlands" {% if profile.country == "Netherlands" %}selected{% endif %}>Netherlands</option>
                        <option value="Switzerland" {% if profile.country == "Switzerland" %}selected{% endif %}>Switzerland</option>
                        <option value="Ireland" {% if profile.country == "Ireland" %}selected{% endif %}>Ireland</option>
                        <option value="Australia" {% if profile.country == "Australia" %}selected{% endif %}>Australia</option>
                        <option value="Singapore" {% if profile.country == "Singapore" %}selected{% endif %}>Singapore</option>
                        <option value="United Arab Emirates" {% if profile.country == "United Arab Emirates" %}selected{% endif %}>United Arab Emirates</option>
                    </select>
                </label>
                <label>
                    Company
                    <input type="text" name="company" value="{{ profile.company }}" placeholder="Your organization" {% if missing_email %}disabled{% endif %} />
                </label>
                <label>
                    Phone (optional)
                    <input type="tel" name="phone" value="{{ profile.phone }}" placeholder="+1 555 123 4567" {% if missing_email %}disabled{% endif %} />
                </label>
                <div class="form__actions">
                    <button class="btn btn--primary" type="submit" {% if missing_email %}disabled{% endif %}>Save profile</button>
                </div>
            </form>
        </div>
    </div>
</section>
{% endblock %}
